# C++

## 声明

后文可能在用词上不够符合标准.

## C++的声明符嵌套语法

## `#include <...>` 和 `#include "..."`的区别

`#include <...>` 搜索顺序: `-I`指定目录 -> 系统目录
`#include "..."` 搜索顺序: 当前目录 -> `-I`指定目录 -> 系统目录

系统头文件使用尖括号, 自定义的头文件使用双引号就可以了.

## C++在预处理阶段做了什么?

- 展开宏定义(`#define`)
- 处理条件编译( `#if`, `#ifdef`, `#elif`, `#else`, `#endif`)
- 展开包含头文件(`#include`)
- 删除注释
- 添加行号和文件名标识,用于调试和报错
- 保留`#pragma`编译器指令

## C++相比于C的新特性

举几个最重要的特性

- 异常: 允许非局部(跨函数)跳转
- 多态
  - 模板
  - 继承
  - 重载(包括函数重载和运算符重载)
- 用户自定义类型/类
  - RAII(利用类对象的生命周期实现).
- 命名空间

## C++的设计模式

众所周知, 设计模式很大程度上是语言相关的, 很多设计模式完全是为了弥补语言本身的缺陷打的补丁.

### 单例模式

这应该是最著名的设计模式了. 不像Java需要声明一个单例类(声明: 我很久没写Java了), C++只需要创建一个全局对象就可以了.

单例模式分为饿汉模式和懒汉模式(我不知道谁最早提出的翻译, 饿汉和懒汉对应eager和lazy, 翻译为尽早创建和延迟创建不就行了, 和eager evaluation/lazy evaluation不是一回事吗?).

在C++11之后利用static变量实现延迟创建的单例模式

```cpp
T& get_instance() {
    static T instance;
    return instance;
}
```

为什么不使用尽早创建呢? 因为延迟创建可以避免跨翻译单元的单例创建顺序问题.

## C++ 标准库的接口
